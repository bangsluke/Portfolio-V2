---
import { getCollection } from 'astro:content';
import { processContent } from '../../utils/content-processor';
import SkillsBubbleChart from './SkillsBubbleChart';

// Get all skills and projects from the local content folders
const skills = await getCollection('skills');
const projects = await getCollection('projects');

// Process skills to include processed descriptions
const processedSkills = skills.map(skill => ({
	...skill,
	data: {
		...skill.data,
		skillDescription: processContent(skill.data.skillDescription || ''),
	},
}));

// Get the class attribute from the parent component
const { class: className } = Astro.props;
---

<section class={`w-full h-full ${className || ''}`}>
	<SkillsBubbleChart
		client:only="preact"
		skills={processedSkills}
		projects={projects}
	/>
</section>
