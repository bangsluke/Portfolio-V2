---
import { getCollection } from 'astro:content';
import CustomerCarouselComponent from './CustomerCarousel';

// Get all companies from the local content folder
const companies = await getCollection('companies');

// Sort companies by dateStart date (newest first)
const sortedCompanies = companies
  .sort((a, b) => {
    // Sort by dateStart
    const dateA = a.data.dateStart || new Date(0);
    const dateB = b.data.dateStart || new Date(0);
    
    if (dateA instanceof Date && dateB instanceof Date) {
      return dateB.getTime() - dateA.getTime();
    }
    
    // Fallback to alphabetical sorting by slug
    return a.slug.localeCompare(b.slug);
  });
---


<CustomerCarouselComponent companies={JSON.stringify(sortedCompanies)} /> 